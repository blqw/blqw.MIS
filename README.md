# blqw.MIS 方法即服务
> ### Method Is Service


# 说明
框架的目标是完全解耦 *(隔离)* **业务开发人员**和**服务器宿主程序**之间的联系  
业务人员只需要关心**业务逻辑实现**,而不需要在意代码是运行哪个种宿主中  
只需要关心**业务的方法定义**,而不需要在意需要以何种协议调用  
只需要关心**业务的参数**,而不需要在意参数如何传入(转换/验证)  

---
例如:
我定义了一个方法 
```csharp
public class UserManager
{
    [Api]
    public User Get([Positive]int id)
    {
        return ...;
    }
}
```
那么在iis中它有可能是这样的 `xxx.com/usermanager/get?id=1`  
在owin中它可能是这样的 `xxx.com/user/1`  
甚至在console中你可以这样调用 `xxx.exe c:UserMager m:Get args:id1`   
还有thrift,grpc,wcf,asp.net core,自定义tcp协议,想怎么玩就怎么玩

---

# 概念
## * 宿主(Host)
> 在计算机环境下，软件赖以生存的软件环境被称作是宿主环境,比如：asp需要运行在IIS里,IIS就是宿主程序
## * 接口(API)  
> 接口泛指实体把自己提供给外界的一种抽象化物（可以为另一实体），用以由内部操作分离出外部沟通方法，使其能被修改内部而不影响外界其他实体与其交互的方式。  
> 在计算机中，接口是计算机系统中两个独立的部件进行信息交换的共享边界。

在框架设计中,任意一个被标注特性`ApiAttribute`的`public`方法都属于接口,即能被外部系统调用  
*ps: API可以是实例方法也可以是静态方法*

## * 参数(Parameter)  
接口的方法参数

## * 属性(Property)  
接口的实例方法所在类的`public`属性  
接口如果是静态方法,则没有属性  

## * 描述(Descriptor)
用于阐述API的各种信息,包括API的命名空间,类型,方法名,参数,属性,返回值等  

## * 选择器(Selector)
用于提供选择接口的功能

## * 转换器(Converter)
用于转换传入参数和返回值

## * 调用器(Invoker)
用于调用指定API对应的方法并获取返回值

## * 过滤器(Filter)  
用于实现接口的AOP和短路

## * 容器(Container)  
包含接口的集合
接口在默认情况下支持所有容器  
在特殊情况下接口可以有选择支持的特定容器或部分容器  
容器的唯一标识是名称,名称不区分大小写

## * 适配器(Adapter)  
包含宿主框架,选择器,转换器,调用器,容器

## * 请求(Request)
包含请求的二进制流,对应的字符串,实际请求对象

## * 响应(Response)
包含响应的二进制流,对应的字符串,实际响应对象

# 类示意图
https://www.processon.com/view/link/58ac53b8e4b0834f65c281e2

# 待完成功能


# 更新日志
## [0.0.14]
* 更新nuget组件
* 支持MVC

## [0.0.13] 2016.12.22
* 事件支持设计完成
* 部分事件已支持

## [0.0.12] 2016.12.22
* 优化数据变更器和验证器的加载逻辑

## [0.0.11] 2016.12.21
* 提供一种可以在方法参数中注入系统对象的方案

## [0.0.10] 2016.12.20
* 日志记录方案确定

## [0.0.9] 2016.12.18
* 单元测试支持完成

## [0.0.8] 2016.12.17
* `Session`功能设计编码完成
* 优化框架部分结构

## [0.0.7] 2016.12.12
* 实现数据变更器`Trim`, `NoTrim`, `Correct`
* 实现 `ApiGlobal`
* 项目改名为`MIS`(Universal Interface Framework)

## [0.0.6] 2016.12.11
* 优化验证器验证部分代码
* 增加数据变更器调用实现

## [0.0.5] 2016.12.10
* 增加一组验证器

## [0.0.4] 2016.12.09
* 框架支持对过滤器的处理
* 框架支持对数据变更器的处理
* 框架支持对参数验证器的处理

## [0.0.3] 2016.12.08
* 删除`ApiSetting`类,改为使用拓展方法提供字典操作的支持
* 增加过滤器`ApiFilterAttribute`
* 增加数据变更器`DataModification`
* 增加API调用上下文`ApiCallContext`
* 增加API全局操作`ApiGlobal`

## [0.0.2] 2016.12.04
* 优化文件结构,框架拆分为2个项目,一个提供特性描述,另一个提供容器操作

## [0.0.1] 2016.12.02
* 主功能实现
